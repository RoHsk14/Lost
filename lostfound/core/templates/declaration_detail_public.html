{% extends 'base.html' %}

{% block title %}{{ signalement.nom_objet }} - D√©tails{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50">
    <!-- Messages Flash -->
    {% if messages %}
    <div class="fixed top-4 right-4 space-y-2 z-50">
        {% for message in messages %}
        <div class="px-6 py-4 rounded-xl shadow-lg text-white transform transition-all duration-300 
            {% if message.tags == 'success' %} bg-green-500 
            {% elif message.tags == 'error' %} bg-red-500 
            {% elif message.tags == 'warning' %} bg-yellow-500 
            {% else %} bg-blue-500 {% endif %}">
            <div class="flex items-center">
                <i class="fas fa-check-circle mr-2" style="{% if message.tags != 'success' %}display:none{% endif %}"></i>
                <i class="fas fa-exclamation-triangle mr-2" style="{% if message.tags != 'warning' and message.tags != 'error' %}display:none{% endif %}"></i>
                <i class="fas fa-info-circle mr-2" style="{% if message.tags != 'info' %}display:none{% endif %}"></i>
                <span class="font-medium">{{ message }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header avec breadcrumb -->
        <div class="mb-8">
            <nav class="flex items-center space-x-2 text-sm text-gray-600 mb-4">
                <a href="{% url 'index' %}" class="hover:text-blue-600 transition-colors">üè† Accueil</a>
                <span>‚Üí</span>
                <a href="{% url 'signalements_list' %}" class="hover:text-blue-600 transition-colors">üìã Signalements</a>
                <span>‚Üí</span>
                <span class="text-gray-800 font-medium">{{ signalement.nom_objet }}</span>
            </nav>
        </div>

        <!-- Contenu principal -->
        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Colonne principale (2/3) -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Card principale de l'objet -->
                <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100">
                    <!-- Header avec badge de statut -->
                    <div class="relative">
                        {% if signalement.photo_principale %}
                        <div class="h-96 overflow-hidden relative">
                            <img src="{{ signalement.photo_principale.url }}" 
                                 alt="{{ signalement.nom_objet }}" 
                                 class="w-full h-full object-cover">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>
                        </div>
                        {% else %}
                        <div class="h-96 bg-gradient-to-br 
                            {% if signalement.type_declaration == 'trouve' %}from-emerald-100 via-green-50 to-emerald-200
                            {% else %}from-red-100 via-pink-50 to-red-200{% endif %} 
                            flex items-center justify-center relative">
                            <div class="text-center">
                                <div class="text-8xl mb-4 animate-bounce">
                                    {% if signalement.categorie == 'electronique' %}üì±
                                    {% elif signalement.categorie == 'accessoire' %}üëú
                                    {% elif signalement.categorie == 'cles' %}üîë
                                    {% elif signalement.categorie == 'vetement' %}üëï
                                    {% elif signalement.categorie == 'document' %}üìÑ
                                    {% elif signalement.categorie == 'sport' %}‚öΩ
                                    {% else %}üì¶{% endif %}
                                </div>
                                <div class="bg-white/70 backdrop-blur-sm rounded-full px-6 py-2">
                                    <p class="text-lg font-bold text-gray-700">{{ signalement.categorie|capfirst }}</p>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        
                        <!-- Badge de statut -->
                        <div class="absolute top-6 left-6">
                            {% if signalement.type_declaration == 'trouve' %}
                            <span class="bg-emerald-500 text-white px-6 py-3 rounded-full text-sm font-bold shadow-xl flex items-center animate-pulse">
                                <span class="w-3 h-3 bg-white rounded-full mr-3 animate-ping"></span>
                                ‚ú® OBJET TROUV√â
                            </span>
                            {% else %}
                            <span class="bg-red-500 text-white px-6 py-3 rounded-full text-sm font-bold shadow-xl flex items-center animate-pulse">
                                <span class="w-3 h-3 bg-white rounded-full mr-3 animate-ping"></span>
                                üîç OBJET PERDU
                            </span>
                            {% endif %}
                        </div>

                        <!-- Badge de temps -->
                        <div class="absolute top-6 right-6">
                            <div class="bg-black/50 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm font-medium">
                                <i class="far fa-clock mr-2"></i>
                                {{ signalement.date_declaration|timesince }}
                            </div>
                        </div>
                    </div>

                    <!-- Contenu de la card -->
                    <div class="p-8">
                        <!-- Titre et informations principales -->
                        <div class="mb-8">
                            <h1 class="text-4xl font-bold text-gray-900 mb-4">{{ signalement.nom_objet }}</h1>
                            
                            <!-- Informations en grille -->
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="space-y-4">
                                    <div class="flex items-center p-3 bg-gray-50 rounded-xl">
                                        <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center mr-4">
                                            <i class="fas fa-user text-white"></i>
                                        </div>
                                        <div>
                                            <span class="text-sm text-gray-600 block">Signal√© par</span>
                                            <span class="font-semibold text-gray-900">{{ signalement.declarant.get_full_name|default:signalement.declarant.username }}</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center p-3 bg-gray-50 rounded-xl">
                                        <div class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center mr-4">
                                            <i class="fas fa-map-marker-alt text-white"></i>
                                        </div>
                                        <div>
                                            <span class="text-sm text-gray-600 block">Lieu de {% if signalement.type_declaration == 'trouve' %}d√©couverte{% else %}perte{% endif %}</span>
                                            <span class="font-semibold text-gray-900">{{ signalement.lieu }}</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="space-y-4">
                                    <div class="flex items-center p-3 bg-gray-50 rounded-xl">
                                        <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center mr-4">
                                            <i class="fas fa-calendar-alt text-white"></i>
                                        </div>
                                        <div>
                                            <span class="text-sm text-gray-600 block">Date de signalement</span>
                                            <span class="font-semibold text-gray-900">{{ signalement.date_declaration|date:"d/m/Y √† H:i" }}</span>
                                        </div>
                                    </div>

                                    {% if signalement.prefecture %}
                                    <div class="flex items-center p-3 bg-gray-50 rounded-xl">
                                        <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center mr-4">
                                            <i class="fas fa-globe text-white"></i>
                                        </div>
                                        <div>
                                            <span class="text-sm text-gray-600 block">Localisation</span>
                                            <span class="font-semibold text-gray-900">{{ signalement.prefecture.nom }}{% if signalement.structure_locale %}, {{ signalement.structure_locale.nom }}{% endif %}</span>
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Description -->
                        {% if signalement.description or signalement.commentaire_declarant %}
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 border border-blue-100">
                            <h3 class="flex items-center text-xl font-bold text-gray-900 mb-4">
                                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                                    <i class="fas fa-align-left text-white text-sm"></i>
                                </div>
                                Description d√©taill√©e
                            </h3>
                            {% if signalement.description %}
                            <p class="text-gray-700 mb-4 leading-relaxed">{{ signalement.description }}</p>
                            {% endif %}
                            {% if signalement.commentaire_declarant %}
                            <div class="border-l-4 border-blue-500 pl-6 bg-white/50 rounded-r-lg py-3">
                                <h4 class="font-semibold text-gray-800 mb-2">üí≠ Commentaire du d√©clarant :</h4>
                                <p class="text-gray-700 italic">{{ signalement.commentaire_declarant }}</p>
                            </div>
                            {% endif %}
                        </div>
                        {% endif %}

                        <!-- Actions principales -->
                        <div class="border-t border-gray-200 pt-6">
                            <div class="flex flex-wrap gap-4">
                                <a href="{% url 'signalements_list' %}" 
                                   class="flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105">
                                    <i class="fas fa-arrow-left mr-2"></i>
                                    Retour √† la liste
                                </a>
                                
                                {% if user.is_authenticated and user == signalement.declarant %}
                                <a href="{% url 'signalement_edit' signalement.pk %}" 
                                   class="flex items-center bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105">
                                    <i class="fas fa-edit mr-2"></i>
                                    Modifier
                                </a>
                                <a href="{% url 'signalement_delete' signalement.pk %}" 
                                   class="flex items-center bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105"
                                   onclick="return confirm('√ätes-vous s√ªr de vouloir supprimer ce signalement ?')">
                                    <i class="fas fa-trash mr-2"></i>
                                    Supprimer
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Colonne lat√©rale (1/3) -->
            <div class="space-y-6">
                <!-- Card d'action principale -->
                <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100 sticky top-8">
                    <div class="p-8">
                        {% if signalement.type_declaration == 'trouve' %}
                        <!-- Si c'est un objet trouv√©, afficher "C'est le mien !" -->
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse">
                                <i class="fas fa-hand-paper text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">C'est votre objet ?</h3>
                            <p class="text-gray-600 mb-6">R√©clamez cet objet trouv√© et contactez la personne qui l'a trouv√©</p>
                        </div>
                        
                        <div class="space-y-4">
                            <a href="{% url 'start_claim_object' signalement.pk %}" 
                               class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-8 py-4 rounded-2xl font-bold text-lg text-center transition-all transform hover:scale-105 shadow-lg flex items-center justify-center">
                                <i class="fas fa-hand-paper mr-3 text-xl"></i>
                                üôã‚Äç‚ôÇÔ∏è C'est le mien !
                            </a>
                            <p class="text-sm text-gray-500 text-center">
                                <i class="fas fa-shield-alt mr-1"></i>
                                V√©rification d'identit√© requise
                            </p>
                        </div>
                        {% else %}
                        <!-- Si c'est un objet perdu, afficher "Je l'ai trouv√© !" -->
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse">
                                <i class="fas fa-search text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">Vous l'avez trouv√© ?</h3>
                            <p class="text-gray-600 mb-6">Aidez cette personne en signalant que vous avez trouv√© cet objet</p>
                        </div>
                        
                        <div class="space-y-4">
                            <a href="{% url 'start_found_object' signalement.pk %}" 
                               class="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-8 py-4 rounded-2xl font-bold text-lg text-center transition-all transform hover:scale-105 shadow-lg flex items-center justify-center">
                                <i class="fas fa-search mr-3 text-xl"></i>
                                ‚ú® Je l'ai trouv√© !
                            </a>
                            <p class="text-sm text-gray-500 text-center">
                                <i class="fas fa-comments mr-1"></i>
                                Messagerie directe avec le propri√©taire
                            </p>
                        </div>
                        {% endif %}

                        <!-- S√©parateur -->
                        <div class="border-t border-gray-200 my-6"></div>

                        <!-- Partager -->
                        <div class="text-center">
                            <h4 class="font-semibold text-gray-900 mb-3">üì§ Partager ce signalement</h4>
                            <div class="flex space-x-3 justify-center">
                                <a href="#" class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white hover:bg-blue-600 transition-colors" onclick="partagerFacebook()">
                                    <i class="fab fa-facebook-f"></i>
                                </a>
                                <a href="#" class="w-12 h-12 bg-blue-400 rounded-full flex items-center justify-center text-white hover:bg-blue-500 transition-colors" onclick="partagerTwitter()">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                <a href="#" class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white hover:bg-green-600 transition-colors" onclick="partagerWhatsApp()">
                                    <i class="fab fa-whatsapp"></i>
                                </a>
                                <a href="#" class="w-12 h-12 bg-gray-500 rounded-full flex items-center justify-center text-white hover:bg-gray-600 transition-colors" onclick="copierLien()">
                                    <i class="fas fa-link"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Statistiques -->
                <div class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl shadow-xl overflow-hidden text-white">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-4">üìä Statistiques</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-indigo-100">üëÄ Vues</span>
                                <span class="font-bold">{{ signalement.nb_vues|default:0 }}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-indigo-100">üí¨ Commentaires</span>
                                <span class="font-bold">{{ nb_commentaires }}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-indigo-100">üìÖ Publi√©</span>
                                <span class="font-bold">{{ signalement.date_declaration|timesince }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        </div>

        <!-- Section Commentaires -->
        <div class="mt-8">
            <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100">
                <div class="p-8">
                    <!-- Header des commentaires -->
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-comments text-white text-xl"></i>
                            </div>
                            <div>
                                <h2 class="text-3xl font-bold text-gray-900">Commentaires de la communaut√©</h2>
                                <p class="text-gray-600">Partagez vos informations pour aider</p>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded-full text-sm font-bold">
                            {{ nb_commentaires }} commentaire{{ nb_commentaires|pluralize }}
                        </div>
                    </div>

                    <!-- Formulaire de commentaire -->
                    <div class="bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-3xl p-8 mb-8">
                        <div class="flex items-center mb-6">
                            <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-lightbulb text-white text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold text-green-800">Vous avez des informations ?</h3>
                                <p class="text-green-700">
                                    Aidez <strong>{{ signalement.declarant.get_full_name|default:signalement.declarant.username }}</strong> en partageant vos informations
                                </p>
                            </div>
                        </div>

                        <form method="post" id="commentaireForm" class="space-y-6">
                            {% csrf_token %}
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="space-y-2">
                                    <label for="{{ form.pseudo.id_for_label }}" class="block text-sm font-semibold text-green-800">
                                        <i class="fas fa-user mr-2"></i>{{ form.pseudo.label }}
                                    </label>
                                    <input type="text" 
                                           name="{{ form.pseudo.name }}" 
                                           id="{{ form.pseudo.id_for_label }}"
                                           placeholder="Votre nom ou pseudonyme" 
                                           class="w-full px-4 py-3 bg-white border-2 border-green-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-100 transition-all">
                                    <p class="text-sm text-green-600">{{ form.pseudo.help_text }}</p>
                                </div>

                                <div class="space-y-2">
                                    <label for="{{ form.email.id_for_label }}" class="block text-sm font-semibold text-green-800">
                                        <i class="fas fa-envelope mr-2"></i>{{ form.email.label }}
                                    </label>
                                    <input type="text" 
                                           name="{{ form.email.name }}" 
                                           id="{{ form.email.id_for_label }}"
                                           placeholder="Email ou t√©l√©phone (optionnel)" 
                                           class="w-full px-4 py-3 bg-white border-2 border-green-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-100 transition-all">
                                    <p class="text-sm text-green-600">{{ form.email.help_text }}</p>
                                </div>
                            </div>

                            <div class="space-y-2">
                                <label for="{{ form.contenu.id_for_label }}" class="block text-sm font-semibold text-green-800">
                                    <i class="fas fa-comment-dots mr-2"></i>{{ form.contenu.label }}
                                </label>
                                <textarea name="{{ form.contenu.name }}" 
                                         id="{{ form.contenu.id_for_label }}"
                                         rows="4" 
                                         placeholder="D√©crivez les informations que vous avez sur cet objet..."
                                         class="w-full px-4 py-3 bg-white border-2 border-green-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-100 transition-all resize-none"></textarea>
                                <p class="text-sm text-green-600">{{ form.contenu.help_text }}</p>
                            </div>

                            <div class="text-center">
                                <button type="submit" 
                                        class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-8 py-4 rounded-2xl font-bold text-lg transition-all transform hover:scale-105 shadow-lg">
                                    <i class="fas fa-paper-plane mr-3"></i>
                                    üí¨ Publier mon commentaire
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Liste des commentaires -->
                    {% if commentaires %}
                    <div class="space-y-6" id="commentairesListe">
                        <h3 class="text-xl font-bold text-gray-900 flex items-center">
                            <i class="fas fa-list mr-3 text-gray-600"></i>
                            Tous les commentaires
                        </h3>
                        {% for commentaire in commentaires %}
                        <div class="bg-gradient-to-r from-gray-50 to-blue-50 border-2 border-gray-100 hover:border-blue-200 rounded-2xl p-6 transition-all transform hover:-translate-y-1 hover:shadow-lg">
                            <div class="flex items-start">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mr-4 flex-shrink-0">
                                    <span class="text-white text-lg font-bold">{{ commentaire.get_display_name|slice:":1"|upper }}</span>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center justify-between mb-3">
                                        <h4 class="font-bold text-gray-900">{{ commentaire.get_display_name }}</h4>
                                        <div class="flex items-center text-sm text-gray-500">
                                            <i class="far fa-clock mr-2"></i>
                                            {{ commentaire.date_creation|date:"d/m/Y √† H:i" }}
                                        </div>
                                    </div>
                                    <p class="text-gray-700 leading-relaxed">{{ commentaire.contenu }}</p>
                                    {% if commentaire.email %}
                                    <div class="mt-3 text-sm text-blue-600">
                                        <i class="fas fa-envelope mr-2"></i>
                                        Contact disponible
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-16" id="aucunCommentaire">
                        <div class="w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-comments text-gray-500 text-3xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-3">Aucun commentaire pour le moment</h3>
                        <p class="text-gray-600 text-lg">Soyez le premier √† partager des informations utiles !</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Animation pour les messages flash
        setTimeout(() => {
            const alerts = document.querySelectorAll('.fixed.top-4.right-4 div');
            alerts.forEach(alert => {
                alert.style.transform = 'translateX(100%)';
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 300);
            });
        }, 5000);

        // Scroll vers les commentaires apr√®s ajout
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('commentaire_ajoute') === 'true') {
            document.getElementById('commentairesListe')?.scrollIntoView({ 
                behavior: 'smooth',
                block: 'center'
            });
        }

        // Fonctions de partage social
        function partagerFacebook() {
            const url = encodeURIComponent(window.location.href);
            const title = encodeURIComponent('{{ signalement.nom_objet }} - TogoRetrouve');
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank', 'width=600,height=400');
        }

        function partagerTwitter() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('{{ signalement.nom_objet }} {% if signalement.type_declaration == "trouve" %}trouv√©{% else %}perdu{% endif %} - Aidez √† retrouver son propri√©taire !');
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank', 'width=600,height=400');
        }

        function partagerWhatsApp() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('{{ signalement.nom_objet }} {% if signalement.type_declaration == "trouve" %}trouv√©{% else %}perdu{% endif %} - Regardez ce signalement sur TogoRetrouve : ');
            window.open(`https://wa.me/?text=${text}${url}`, '_blank');
        }

        function copierLien() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                // Cr√©er une notification temporaire
                const notification = document.createElement('div');
                notification.innerHTML = '<i class="fas fa-check mr-2"></i>Lien copi√© !';
                notification.className = 'fixed top-20 right-4 bg-green-500 text-white px-6 py-3 rounded-xl shadow-lg z-50 transform transition-all duration-300';
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.transform = 'translateX(100%)';
                    notification.style.opacity = '0';
                    setTimeout(() => notification.remove(), 300);
                }, 2000);
            });
        }

        // Animation d'apparition pour les √©l√©ments
        document.addEventListener('DOMContentLoaded', function() {
            const elements = document.querySelectorAll('.transform');
            elements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    el.style.transition = 'all 0.6s ease-out';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });

        // Validation du formulaire avec animation
        document.getElementById('commentaireForm').addEventListener('submit', function(e) {
            const commentaire = this.querySelector('textarea').value.trim();
            if (commentaire.length < 10) {
                e.preventDefault();
                alert('Votre commentaire doit contenir au moins 10 caract√®res.');
                return false;
            }

            // Animation du bouton de soumission
            const button = this.querySelector('button[type="submit"]');
            button.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>Envoi en cours...';
            button.disabled = true;
        });

        // Animation des boutons au hover
        document.querySelectorAll('a, button').forEach(element => {
            element.addEventListener('mouseenter', function() {
                if (this.classList.contains('transform')) {
                    this.style.transform = 'scale(1.05) translateY(-2px)';
                }
            });
            
            element.addEventListener('mouseleave', function() {
                if (this.classList.contains('transform')) {
                    this.style.transform = 'scale(1) translateY(0)';
                }
            });
        });
    </script>

    <!-- CSS personnalis√© pour les animations -->
    <style>
        /* Animation de pulsation pour les badges */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Animation de rebond pour les ic√¥nes */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .animate-bounce {
            animation: bounce 2s infinite;
        }

        /* Animation de rotation pour les √©l√©ments de chargement */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .fa-spin {
            animation: spin 1s linear infinite;
        }

        /* Transitions fluides pour tous les √©l√©ments interactifs */
        .transition-all {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Effet de survol pour les cartes */
        .hover\:shadow-xl:hover {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        /* Effet de focus pour les inputs */
        .focus\:ring-4:focus {
            box-shadow: 0 0 0 4px var(--ring-color, rgba(59, 130, 246, 0.1));
        }

        /* Animation de typing pour les placeholders */
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        /* Style pour les scrollbars */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</div>
{% endblock %}